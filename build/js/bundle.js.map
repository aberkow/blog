{"version":3,"sources":["webpack:///webpack/bootstrap 323b7f4a170037f43a45","webpack:///./public/js/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA,8bAA6b;AAC7b;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0cAAyc;AACzc;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA,IAAG;AACH;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 323b7f4a170037f43a45\n **/","//var server = require('../../server.js');\n\nvar mainForm = $('#main__form');\n\nvar postContainer = $('.postView__container');\nvar postTitle = $('.postView__title');\nvar postAuthor = $('.postView__author');\nvar postText = $('.postView__text');\nvar postDelete = $('.postView__button-delete');\n\n$(document).ready(function(){\n  mainForm.on('submit', function(evt){\n    var title = $('#main__form-title').val();\n    var author = $('#main__form-author').val();\n    var text = $('#main__form-text').val();\n    evt.preventDefault();\n    var post = new BlogPost(title, author, text);\n    //validate the form.\n    if (!title || !author || !text){\n      console.log('Please fill out the post.');\n    } else {\n      addPost(post);\n      // $('#main__form-title').val('');\n      // $('#main__form-author').val('');\n      // $('#main__form-text').val('');\n    }\n    getPosts();\n  });\n  //ajax request to get posts from api\n  getPosts();\n\n  deletePost();\n\n  updatePost();\n  showUpdateForm();\n});\n\nshowPosts = function(results){\n  var post = {\n    title: '',\n    author: '',\n    text: '',\n    id: '',\n    html: ''\n  }\n  for (var i = 0; i < results.length; i++){\n    post.title = results[i].title;\n    post.author = results[i].author;\n    post.text = results[i].text;\n    post.id = results[i]._id;\n    post.html += \"<div class='postView__container' data-id=\" + post.id + \"><h2 class='postView__title'>\" + post.title + \"</h2><h3 class='postView__author'>\" + post.author + \"</h3>\" + \"<div class='postView__text-wrapper'><p class='postView__text'>\" + post.text + \"</p></div>\" + \"<button class='postView__button-update'>Update</button><button class='postView__button-delete'>Delete</button> </div><div class='postView__update' style='display:none;' data-id=\" + post.id + \"><form method='POST' class='postView__update-form'><input type='text' name='title' class='postView__update-title'><input type='text' name='author' class='postView__update-author'><textarea name='text' rows='8' cols='40' class='postView__update-text'></textarea><input type='submit' value='POST' class='postView__update-post'></form></div>\"\n  }\n  $('.postView').append(post.html);\n}\n\nvar showOnePost = function(results){\n  //perhaps use .html() to reset the contents of the post div.\n  var onePost = {\n    title: results.title,\n    author: results.author,\n    text: results.text,\n    id: results._id,\n    html: ''\n  }\n  onePost.html = \"<div class='postView__container' data-id=\" + onePost.id + \"><h2 class='postView__title'>\" + onePost.title + \"</h2><h3 class='postView__author'>\" + onePost.author + \"</h3>\" + \"<div class='postView__text-wrapper'><p class='postView__text'>\" + onePost.text + \"</p></div>\" + \"<button class='postView__button-update'>Update</button><button class='postView__button-delete'>Delete</button> </div><div class='postView__update' style='display:none;' data-id=\" + onePost.id + \"><form method='POST' class='postView__update-form'><input type='text' name='title' class='postView__update-title'><input type='text' name='author' class='postView__update-author'><textarea name='text' rows='8' cols='40' class='postView__update-text'></textarea><input type='submit' value='POST' class='postView__update-post'></form></div>\"\n  $('.postView').html(onePost.html);\n}\n\nvar addPost = function(postData){\n  console.log(postData, 'from addPost');\n  $.post('/posts', postData, function(data){\n    console.log(data, 'from addPost');\n    $('.postView').html(data);\n  });\n}\n\n\n//try adding a getJSON request for just one post.\n//maybe\n// var getOnePost = function(postId){\n//   $.getJSON('/posts/', postId, function(data){\n//     console.log(data, 'from getOnePost');\n//     showOnePost(data);\n//   });\n// }\n\nvar getPosts = function(){\n  $.getJSON('/posts', function(data){\n    console.log(data);\n    showPosts(data);\n  });\n}\n\nvar updatePostAjax = function(newTitle, newAuthor, newText, postId){\n  var updatePost = {\n    title: newTitle,\n    author: newAuthor,\n    text: newText,\n    postId: postId\n  }\n  $.ajax({\n    url: '/posts/' + updatePost.postId,\n    data: updatePost,\n    dataType: 'JSON',\n    method: 'PUT'\n  })\n  .done(function(result){\n    console.log(result, 'from updatePostAjax');\n    console.log(updatePost);\n    $('.postView__container').remove();\n    getPosts();\n    //getOnePost(updatePost.postId);\n  })\n  .fail(function(jqXHR, error){\n    console.log(error, 'from updatePostAjax');\n  });\n}\n\nvar showUpdateForm = function(){\n  $(document).on('click', '.postView__button-update', function(evt){\n    evt.preventDefault();\n    var targetId = $(evt.target).parent().attr('data-id');\n    var item = $(evt.target).parent();\n    var updateForm = item.next('.postView__update');\n    console.log(targetId, 'from updatePost');\n    updateForm.show();\n  });\n}\n\nvar updatePost = function(){\n  $(document).on('submit', '.postView__update-form', function(evt){\n    evt.preventDefault();\n    var updateForm = $('.postView__update-form');\n    var postId = updateForm.parent().attr('data-id');\n    var newTitle = updateForm.children('.postView__update-title').val();\n    var newAuthor = updateForm.children('.postView__update-author').val();\n    var newText = updateForm.children('.postView__update-text').val();\n\n    updatePostAjax(newTitle, newAuthor, newText, postId);\n    updateForm.hide();\n\n  });\n}\n\nvar deletePostAjax = function(postId){\n  var deletePost = {\n    postId: postId\n  }\n  $.ajax({\n    url: '/posts/' + deletePost.postId,\n    data: deletePost,\n    dataType: 'JSON',\n    method: 'DELETE'\n  })\n  .done(function(result){\n    console.log(result, 'from deletePostAjax');\n\n  })\n  .fail(function(jqXHR, error){\n    console.log(error, 'from deletePostAjax');\n  });\n}\n\nvar deletePost = function(){\n  $(document).on('click', '.postView__button-delete', function(evt){\n    evt.preventDefault();\n    var targetId = $(evt.target).parent().attr('data-id');\n    console.log(targetId, 'from deletePostView');\n    var targetToRemove = $(evt.target).parent().remove();\n    deletePostAjax(targetId);\n  });\n}\n\nfunction BlogPost(title, author, text){\n  //postInfo is an object that contains everything going to the database.\n  this.title = title;\n  this.author = author;\n  this.text = text;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/js/index.js\n ** module id = 0\n ** module chunks = 0\n **/"],"sourceRoot":""}